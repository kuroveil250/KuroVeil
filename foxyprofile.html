<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Foxy ‚Ä¢ Kuroveil</title>
  <meta name="description" content="Kuroveil Gen 0 talent profile for Foxy ‚Äî horror, DBD, games and lore." />
  <meta name="theme-color" content="#0d0018" />
  <link rel="icon" type="image/png" href="favicon.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#050008;
      --bg1:#0d0018;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --line: rgba(177,108,255,.22);
      --line2: rgba(177,108,255,.14);
      --text:#f6f1ff;
      --muted: rgba(246,241,255,.72);
      --accent: rgb(177,108,255);
      --accent2: rgb(255,90,220);
      --ok: rgba(90,255,190,.95);
      --warn: rgba(255,205,90,.95);
      --danger: rgba(255,90,120,.95);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;
      --focus: rgba(177,108,255,.85);
      --ease: cubic-bezier(.2,.9,.2,1);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 420px at 15% -10%, rgba(177,108,255,.22), transparent 60%),
        radial-gradient(900px 380px at 85% 0%, rgba(255,90,220,.12), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* ===== Scroll progress ===== */
    .progress{
      position:fixed;
      left:0; top:0;
      width:100%;
      height:4px;
      z-index:99999;
      background: rgba(255,255,255,.06);
      border-bottom: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
    }
    .progress > span{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(177,108,255,.95), rgba(255,90,220,.85));
      box-shadow: 0 0 24px rgba(177,108,255,.28);
      transform-origin: left center;
    }

    /* Accessibility: skip link */
    .skip{
      position:absolute;
      left:-999px;
      top:auto;
      width:1px;height:1px;
      overflow:hidden;
    }
    .skip:focus{
      left:12px; top:12px;
      width:auto;height:auto;
      padding:10px 12px;
      border-radius: 12px;
      background: rgba(0,0,0,.7);
      border:1px solid rgba(255,255,255,.14);
      z-index: 999999;
      color: var(--text);
      text-decoration:none;
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }

    /* Focus styles */
    a:focus-visible, button:focus-visible{
      outline: 3px solid var(--focus);
      outline-offset: 3px;
      border-radius: 12px;
    }

    /* ===== Background layers (deduped + fixed z-index) ===== */
    .veil-lines{
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.55;
      background:
        repeating-linear-gradient(135deg,
          rgba(177,108,255,.14) 0px,
          rgba(177,108,255,.14) 1px,
          transparent 1px,
          transparent 18px);
      mask-image: radial-gradient(800px 500px at 50% 18%, rgba(0,0,0,1), transparent 70%);
      z-index:-6;
    }

    .veil-noise{
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.08;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.5'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      z-index:-5;
    }

    .veil-fog{
      position:fixed;
      inset:-20%;
      pointer-events:none;
      z-index:-3;
      opacity:.70;
      filter: blur(22px) saturate(1.1);
      mix-blend-mode: screen;
      background:
        radial-gradient(900px 420px at 15% 35%, rgba(177,108,255,.26), transparent 60%),
        radial-gradient(820px 360px at 70% 25%, rgba(255,90,220,.16), transparent 55%),
        radial-gradient(700px 300px at 50% 70%, rgba(255,255,255,.10), transparent 60%),
        radial-gradient(520px 260px at 25% 80%, rgba(177,108,255,.16), transparent 60%),
        radial-gradient(560px 280px at 85% 75%, rgba(255,90,220,.12), transparent 62%);
      animation: fogDrift 18s ease-in-out infinite;
      will-change: transform, opacity;
    }

    @keyframes fogDrift{
      0%   { transform: translate3d(-2%, -1%, 0) scale(1.02); }
      50%  { transform: translate3d( 2%,  1%, 0) scale(1.06); }
      100% { transform: translate3d(-2%, -1%, 0) scale(1.02); }
    }

    .moon-bloom{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:-3;
      opacity:.70;
      mix-blend-mode: screen;
      background:
        radial-gradient(560px 560px at 78% 18%,
          rgba(177,108,255,.30),
          rgba(177,108,255,.16) 35%,
          transparent 72%);
      filter: blur(3px);
      animation: bloomPulse 10s ease-in-out infinite;
      will-change: transform, opacity;
    }

    @keyframes bloomPulse{
      0%,100% { transform: translate3d(0,0,0) scale(1); opacity:.62; }
      50%     { transform: translate3d(-6px, 8px, 0) scale(1.08); opacity:.80; }
    }

    #veilParticles{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:-2;
      opacity:.55;
    }

    /* Content always on top */
    .wrap{ position:relative; z-index:1; }

    @media (prefers-reduced-motion: reduce){
      .veil-fog, .moon-bloom{ animation:none !important; }
    }

    /* ===== ANIME / CARTOON BLUE MOON (IMAGE-BASED) ===== */

    .moon-wrap{
      position: fixed;
      top: 5%;
      right: 9%;
      width: 520px;
      height: 520px;
      pointer-events: none;
      z-index: -2;
      transform: translate3d(var(--mx,0px), var(--my,0px), 0);
      will-change: transform;
      opacity: .96;
    }

    /* Base moon using your image */
    .moon{
      position:absolute;
      inset:0;
      border-radius:50%;
      overflow:hidden;

      background: url(bluemoon1.png) center/cover no-repeat;

      /* Anime grading (more stylized than realistic) */
      filter:
        saturate(1.45)
        contrast(1.38)
        brightness(1.06);

      /* Strong anime glow */
      box-shadow:
        0 0 90px rgba(110,180,255,.60),
        0 0 220px rgba(110,180,255,.34),
        0 0 420px rgba(110,180,255,.14);

      animation: kvMoonFloat 16s ease-in-out infinite;
      transform: translateZ(0);
    }

    /* Cel shading + highlight (illustrated look) */
    .moon::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius:50%;
      pointer-events:none;

      background:
        radial-gradient(circle at 28% 22%,
          rgba(255,255,255,.55) 0%,
          rgba(255,255,255,.22) 22%,
          rgba(255,255,255,0) 42%),

        radial-gradient(120% 120% at 78% 78%,
          rgba(0,0,30,.55) 0%,
          rgba(0,0,30,.30) 28%,
          rgba(0,0,0,0) 56%),

        radial-gradient(circle at 50% 50%,
          rgba(0,0,0,0) 58%,
          rgba(0,0,0,.22) 78%,
          rgba(0,0,0,.55) 100%);

      mix-blend-mode: overlay;
      opacity: .92;
    }

    /* Anime rim light (makes it pop) */
    .moon::after{
      content:"";
      position:absolute;
      inset:-8%;
      border-radius:50%;
      pointer-events:none;

      background:
        radial-gradient(circle,
          rgba(120,205,255,0) 58%,
          rgba(120,205,255,.85) 69%,
          rgba(120,205,255,.35) 77%,
          rgba(120,205,255,0) 86%);

      filter: blur(4px);
      mix-blend-mode: screen;
      opacity:.95;
    }

    /* Atmospheric halo (outer glow ring) */
    .moon-halo{
      position:absolute;
      inset:-22%;
      border-radius:50%;
      background:
        radial-gradient(circle,
          rgba(130,200,255,0) 55%,
          rgba(130,200,255,.28) 64%,
          rgba(130,200,255,0) 78%);
      filter: blur(3.5px);
      opacity:.75;
      mix-blend-mode: screen;
      animation: kvHaloPulse 12s ease-in-out infinite;
    }

    /* Optional: soft fog pass (keep it subtle for anime) */
    .moon .moon-fog{
      position:absolute;
      inset:-30%;
      border-radius:50%;
      opacity:.16;
      mix-blend-mode: screen;
      background:
        radial-gradient(320px 180px at 20% 30%, rgba(255,255,255,.12), transparent 72%),
        radial-gradient(380px 240px at 70% 55%, rgba(150,200,255,.10), transparent 74%),
        radial-gradient(300px 160px at 40% 75%, rgba(255,255,255,.08), transparent 72%);
      filter: blur(14px);
      animation: kvMoonFogPass 18s ease-in-out infinite;
    }

    @keyframes kvMoonFloat{
      0%,100%{ transform: translateY(0px) scale(1); }
      50%{ transform: translateY(-12px) scale(1.03); }
    }
    @keyframes kvHaloPulse{
      0%,100%{ transform: scale(1); opacity:.62; }
      50%{ transform: scale(1.06); opacity:.82; }
    }
    @keyframes kvMoonFogPass{
      0%   { transform: translate3d(-16px, -8px, 0) scale(1.02); opacity:.10; }
      50%  { transform: translate3d( 18px,  10px, 0) scale(1.06); opacity:.18; }
      100% { transform: translate3d(-16px, -8px, 0) scale(1.02); opacity:.10; }
    }

    /* ===== DEMON MODE (anime blood moon, keeps texture) ===== */
    body.demon .moon{
      background: url(bluemoon1.png) center/cover no-repeat;

      filter:
        hue-rotate(-140deg)
        saturate(1.65)
        contrast(1.45)
        brightness(1.06);

      box-shadow:
        0 0 110px rgba(255,80,110,.70),
        0 0 260px rgba(255,80,110,.34),
        0 0 520px rgba(255,80,110,.14);
    }

    body.demon .moon::after{
      background:
        radial-gradient(circle,
          rgba(255,90,120,0) 58%,
          rgba(255,90,120,.88) 69%,
          rgba(255,90,120,.35) 77%,
          rgba(255,90,120,0) 86%);
    }

    body.demon .moon-halo{
      background:
        radial-gradient(circle,
          rgba(255,90,120,0) 55%,
          rgba(255,90,120,.28) 64%,
          rgba(255,90,120,0) 78%);
      opacity:.78;
    }

    @media (max-width: 900px){
      .moon-wrap{ width:320px; height:320px; right:4%; top:3%; }
    }
    @media (prefers-reduced-motion: reduce){
      .moon, .moon-halo, .moon .moon-fog{ animation:none !important; }
      .moon-wrap{ transform:none !important; }
    }

    /* Layout */
    .wrap{
      position:relative;
      z-index:1;
      max-width:1100px;
      margin:0 auto;
      padding: 22px 18px 110px;
    }

    /* Top nav */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:12px 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: 999px;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 40px rgba(0,0,0,.35);
      margin-top: 6px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      text-decoration:none; color:var(--text);
      font-weight:800; letter-spacing:.3px;
    }
    .brand img{ width:22px; height:22px; border-radius:6px; }
    .navlinks{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
      font-size:13px;
    }
    .navlinks a{
      text-decoration:none;
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      border:1px solid transparent;
      transition:.18s ease;
    }
    .navlinks a:hover{
      color:var(--text);
      border-color: rgba(177,108,255,.35);
      background: rgba(177,108,255,.10);
      transform: translateY(-1px);
    }

    /* Hero */
    .hero{
      margin-top:18px;
      border-radius: calc(var(--radius) + 8px);
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(900px 420px at 20% 10%, rgba(177,108,255,.22), transparent 60%),
        radial-gradient(760px 340px at 80% 10%, rgba(255,90,220,.12), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:-80px -80px auto auto;
      width:420px; height:420px;
      background: radial-gradient(circle at 30% 30%, rgba(177,108,255,.35), transparent 65%);
      filter: blur(2px);
      opacity:.8;
      transform: rotate(12deg);
    }
    .hero-inner{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:18px;
      padding:20px;
      align-items:stretch;
    }
    @media (max-width: 900px){
      .hero-inner{ grid-template-columns:1fr; }
    }

    /* Left: main identity */
    .identity{
      padding:18px;
      border-radius: var(--radius);
      background: rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.10);
      position:relative;
      overflow:hidden;
    }

    .badge-row{
      display:flex; flex-wrap:wrap; gap:8px; align-items:center;
      margin-bottom:10px;
    }
    .badge{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(177,108,255,.35);
      background: rgba(177,108,255,.10);
      color: var(--text);
      display:inline-flex;
      align-items:center;
      gap:8px;
      position:relative;
      overflow:hidden;
    }
    .badge.alt{
      border-color: rgba(255,90,220,.35);
      background: rgba(255,90,220,.10);
    }

    /* Status pill */
    .status{
      border-color: rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(246,241,255,.9);
      gap:6px;
    }
    .status .dot{
      width:8px; height:8px;
      border-radius:999px;
      background: rgba(255,255,255,.35);
      box-shadow: 0 0 0 6px rgba(255,255,255,.06);
    }
    .status.live{
      border-color: rgba(255,90,120,.35);
      background: rgba(255,90,120,.10);
    }
    .status.live .dot{
      background: var(--danger);
      box-shadow: 0 0 18px rgba(255,90,120,.35), 0 0 0 6px rgba(255,90,120,.08);
      animation: pulse 1.2s ease-in-out infinite;
    }
    .status.scheduled{
      border-color: rgba(255,205,90,.35);
      background: rgba(255,205,90,.10);
    }
    .status.scheduled .dot{
      background: var(--warn);
      box-shadow: 0 0 18px rgba(255,205,90,.30), 0 0 0 6px rgba(255,205,90,.08);
    }
    .status.offline{
      border-color: rgba(90,255,190,.20);
      background: rgba(90,255,190,.06);
    }
    .status.offline .dot{
      background: rgba(90,255,190,.6);
      box-shadow: 0 0 0 6px rgba(90,255,190,.06);
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); }
      50%{ transform: scale(1.25); }
    }

    h1{
      margin:8px 0 6px;
      font-size:44px;
      line-height:1.05;
      letter-spacing:-.6px;
      text-shadow: 0 0 18px rgba(177,108,255,.12);
    }
    .titleline{
      color: var(--muted);
      margin:0 0 12px;
      font-size:14px;
    }
    .hook{
      margin: 0;
      color: rgba(246,241,255,.88);
      font-size:15px;
      line-height:1.55;
      max-width: 62ch;
    }

    .id-actions, .cta{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      position:relative;
      z-index:2;
    }

    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding:10px 12px;
      border-radius: 14px;
      font-weight:700;
      font-size:13px;
      cursor:pointer;
      transition:.18s ease;
      display:inline-flex;
      align-items:center;
      gap:8px;
      text-decoration:none;
    }
    .btn:hover{
      transform: translateY(-2px);
      border-color: rgba(177,108,255,.35);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      background: rgba(177,108,255,.08);
    }
    .btn.small{ padding:9px 10px; font-weight:600; }
    .btn.primary{
      border-color: rgba(177,108,255,.55);
      background: rgba(177,108,255,.12);
    }
    .btn.primary:hover{ background: rgba(177,108,255,.18); }

    .toast{
      margin-top:10px;
      font-size:12px;
      color: rgba(246,241,255,.72);
      min-height: 16px;
    }

    .quote{
      border-left: 3px solid rgba(177,108,255,.55);
      padding-left: 12px;
      margin-top: 12px;
      color: rgba(246,241,255,.90);
      font-style: italic;
    }

    /* Right: portrait + quick links */
    .side{
      display:grid;
      grid-template-rows: 1fr auto;
      gap:12px;
    }
    .portrait{
      border-radius: var(--radius);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
      position:relative;
      min-height: 280px;
    }
    .portrait img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      filter: saturate(1.05) contrast(1.05);
      transform: scale(1.02);
    }
    .watermark{
      position:absolute;
      left:14px;
      bottom:12px;
      font-size:12px;
      color: rgba(246,241,255,.75);
      background: rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.12);
      padding:6px 10px;
      border-radius:999px;
      backdrop-filter: blur(10px);
      z-index: 2;
    }

    .socials{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 520px){
      .socials{ grid-template-columns: 1fr; }
    }
    .sbtn{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:10px 10px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: var(--text);
      text-decoration:none;
      font-weight:600;
      font-size:13px;
      transition:.18s ease;
      position:relative;
      overflow:hidden;
    }
    .sbtn::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(135deg, rgba(177,108,255,.18), rgba(255,90,220,.10));
      opacity:0;
      transition:.18s ease;
    }
    .sbtn:hover{
      transform: translateY(-2px);
      border-color: rgba(177,108,255,.35);
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
    }
    .sbtn:hover::before{ opacity:1; }
    .sbtn span{ position:relative; z-index:1; }

    /* Sticky mini-nav */
    .mininav{
      position: sticky;
      top: 14px;
      z-index: 2;
      margin-top: 14px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      padding:10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }

    .mininav a{
      text-decoration:none;
      color: var(--muted);
      font-size:13px;
      padding:8px 10px;
      border-radius: 999px;
      transition:.18s ease;
      border:1px solid transparent;
      position:relative;
    }
    .mininav a:hover{
      color: var(--text);
      background: rgba(177,108,255,.10);
      border-color: rgba(177,108,255,.30);
      transform: translateY(-1px);
    }
    .mininav a.active{
      color: var(--text);
      background: rgba(177,108,255,.14);
      border-color: rgba(177,108,255,.38);
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
    }
    .mininav a.active::after{
      content:"";
      position:absolute;
      left:14px; right:14px;
      bottom:6px;
      height:2px;
      border-radius:999px;
      background: linear-gradient(90deg, rgba(177,108,255,.95), rgba(255,90,220,.75));
      opacity:.95;
    }

    /* Grid sections */
    .grid{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1fr .95fr;
      gap:14px;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns:1fr; }
    }

    .card{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: var(--radius);
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
      overflow:hidden;
      position:relative; /* needed for peek stickers */
    }
    .card .head{
      padding:14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      background: rgba(0,0,0,.18);
      flex-wrap:wrap;
      position:relative;
      z-index:2; /* keep content above peeks */
    }
    .card h2{
      margin:0;
      font-size:14px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color: rgba(246,241,255,.85);
    }
    .card .body{ padding:14px 16px; position:relative; z-index:2; }

    /* Stats */
    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .stat{
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      position:relative;
      overflow:hidden;
    }
    .stat .k{ font-size:12px; color: var(--muted); }
    .stat .v{ font-size:14px; font-weight:700; margin-top:4px; }

    /* Bars */
    .bars{ display:grid; gap:10px; }
    .bar{
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      position:relative;
      overflow:hidden;
    }
    .bar .row{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      font-size:13px;
    }
    .meter{
      height:8px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      overflow:hidden;
      margin-top:8px;
      border:1px solid rgba(255,255,255,.08);
    }
    .fill{
      height:100%;
      width: 70%;
      background: linear-gradient(90deg, rgba(177,108,255,.85), rgba(255,90,220,.75));
      border-radius: 999px;
    }

    /* Tags (clickable filters) */
    .tags{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .tag{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: rgba(246,241,255,.85);
      user-select:none;
    }
    button.tag{
      cursor:pointer;
      transition:.18s ease;
    }
    button.tag:hover{
      transform: translateY(-1px);
      border-color: rgba(177,108,255,.35);
      background: rgba(177,108,255,.10);
      color: var(--text);
    }
    .tag.active{
      border-color: rgba(177,108,255,.55);
      background: rgba(177,108,255,.16);
      color: var(--text);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .tag.note{
      border-color: rgba(255,255,255,.14);
      background: rgba(255,255,255,.03);
      color: rgba(246,241,255,.72);
    }

    /* Lists */
    .list{ display:grid; gap:10px; }
    .item{
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      position:relative;
      overflow:hidden;
    }
    .item .t{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .item strong{ font-size:13px; }
    .item .sub{
      margin-top:8px;
      font-size:13px;
      color: rgba(246,241,255,.78);
      line-height:1.55;
    }

    /* Clips */
    .clips{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 900px){
      .clips{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 520px){
      .clips{ grid-template-columns: 1fr; }
    }
    .clip{
      border-radius: 16px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      min-height: 210px;
      position:relative;
      display:grid;
      grid-template-rows: 120px 1fr;
    }
    .clip .thumb{
      position:relative;
      overflow:hidden;
      background:
        radial-gradient(600px 180px at 30% 10%, rgba(177,108,255,.22), transparent 60%),
        radial-gradient(520px 170px at 80% 10%, rgba(255,90,220,.14), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .clip .thumb::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        repeating-linear-gradient(135deg,
          rgba(255,255,255,.08) 0px,
          rgba(255,255,255,.08) 1px,
          transparent 1px,
          transparent 18px);
      opacity:.35;
      mask-image: radial-gradient(240px 120px at 40% 30%, rgba(0,0,0,1), transparent 70%);
    }
    .clip .play{
      position:absolute;
      left:12px; bottom:12px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.30);
      font-size:12px;
      color: rgba(246,241,255,.86);
      backdrop-filter: blur(10px);
      z-index: 2;
    }
    .clip .body{
      padding:12px;
      display:grid;
      gap:8px;
      align-content:start;
      position:relative;
      z-index:2;
    }
    .clip .title{
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .clip .title strong{ font-size:13px; }
    .clip .desc{ margin:0; color: rgba(246,241,255,.75); font-size:13px; line-height:1.5; }
    .clip .actions{ display:flex; gap:8px; flex-wrap:wrap; margin-top:2px; }

    /* Lore toggle tabs */
    .tabs{ display:flex; gap:8px; flex-wrap:wrap; }
    .tabbtn{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: rgba(246,241,255,.85);
      padding:9px 10px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:800;
      font-size:12px;
      letter-spacing:.02em;
      transition:.18s ease;
    }
    .tabbtn:hover{
      transform: translateY(-1px);
      border-color: rgba(177,108,255,.35);
      background: rgba(177,108,255,.10);
      color: var(--text);
    }
    .tabbtn.active{
      border-color: rgba(177,108,255,.55);
      background: rgba(177,108,255,.16);
      color: var(--text);
    }
    .panel{
      margin-top:12px;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 520px){
      .gallery{ grid-template-columns: 1fr 1fr; }
    }
    .gimg{
      border-radius: 16px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.2);
      aspect-ratio: 1 / 1;
      cursor:pointer;
      transition:.18s ease;
      position:relative;
    }
    .gimg img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.02);
      transition:.18s ease;
    }
    .gimg:hover{
      transform: translateY(-2px);
      border-color: rgba(177,108,255,.35);
      box-shadow: 0 16px 50px rgba(0,0,0,.35);
    }
    .gimg:hover img{ transform: scale(1.06); }
    .hidden{ display:none !important; }

    .empty{
      padding:12px 12px;
      border-radius: 14px;
      border:1px dashed rgba(255,255,255,.16);
      background: rgba(0,0,0,.16);
      color: rgba(246,241,255,.75);
      font-size:13px;
      line-height:1.5;
      display:none;
      margin-top:10px;
    }
    .empty.show{ display:block; }

    /* Lightbox */
    .lightbox{
      position:fixed;
      inset:0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.72);
      z-index: 999;
      padding: 18px;
    }
    .lightbox.open{ display:grid; }
    .lightbox figure{
      margin:0;
      max-width:min(920px, 96vw);
      max-height: 86vh;
      border-radius: 18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      box-shadow: 0 22px 70px rgba(0,0,0,.55);
    }
    .lightbox img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      background: rgba(0,0,0,.35);
    }
    .lightbox .hint{
      margin-top:10px;
      color: rgba(246,241,255,.7);
      font-size:12px;
      text-align:center;
    }

    /* Footer */
    .foot{
      margin-top:18px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      padding: 14px 10px 0;
      color: rgba(246,241,255,.65);
      font-size:12px;
    }
    .foot a{ color: rgba(246,241,255,.75); text-decoration:none; }
    .foot a:hover{ text-decoration:underline; }

    /* Floating actions */
    .floatbar{
      position:fixed;
      right: 16px;
      bottom: 16px;
      display:grid;
      gap:10px;
      z-index: 9999;
    }
    .fab{
      width: 46px; height: 46px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      color: var(--text);
      cursor:pointer;
      box-shadow: 0 18px 50px rgba(0,0,0,.45);
      transition:.18s ease;
      display:grid;
      place-items:center;
      backdrop-filter: blur(10px);
    }
    .fab:hover{
      transform: translateY(-2px);
      border-color: rgba(177,108,255,.35);
      background: rgba(177,108,255,.10);
    }
    .fab span{ font-size:18px; line-height:1; }
    .sr{
      position:absolute !important;
      height:1px;width:1px;
      overflow:hidden;
      clip: rect(1px,1px,1px,1px);
      white-space:nowrap;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; scroll-behavior:auto !important; }
      .navlinks a:hover, .sbtn:hover, .btn:hover, .tag:hover, .gimg:hover, .fab:hover, .mininav a:hover{
        transform:none !important;
      }
      .gimg:hover img{ transform:none !important; }
      .status.live .dot{ animation:none !important; }
    }

    /* Hover pop */
    .card, .item, .clip, .gimg, .sbtn, .stat, .bar, .identity, .portrait, .hero, .mininav{
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      will-change: transform;
    }
    .card:hover, .item:hover, .clip:hover, .gimg:hover, .sbtn:hover, .stat:hover, .bar:hover, .identity:hover, .portrait:hover, .hero:hover, .mininav:hover{
      transform: translateY(-4px) scale(1.015);
      box-shadow: 0 22px 70px rgba(0,0,0,.55);
      border-color: rgba(177,108,255,.35);
      background: rgba(255,255,255,.06);
    }
    @media (hover: none){
      .card:hover, .item:hover, .clip:hover, .gimg:hover, .sbtn:hover, .stat:hover, .bar:hover, .identity:hover, .portrait:hover, .hero:hover, .mininav:hover{
        transform: none;
        box-shadow: 0 14px 40px rgba(0,0,0,.25);
      }
    }

    /* Demon takeover mode */
    body.demon{
      --accent: rgb(255,90,120);
      --accent2: rgb(177,108,255);
    }
    body.demon .hero,
    body.demon .card,
    body.demon .topbar{
      filter: saturate(1.25) contrast(1.15);
    }

    /* Heavy shake burst, then steady glitch */
    body.demon .wrap{
      animation:
        demonBurst .14s linear infinite,
        demonDrift 2.2s ease-in-out infinite;
    }
    @keyframes demonBurst{
      0%{ transform: translate(0,0) rotate(0deg); }
      10%{ transform: translate(-2px, 2px) rotate(-.2deg); }
      20%{ transform: translate(3px, -1px) rotate(.25deg); }
      30%{ transform: translate(-4px, 1px) rotate(-.35deg); }
      40%{ transform: translate(4px, 2px) rotate(.35deg); }
      50%{ transform: translate(-3px, -2px) rotate(-.25deg); }
      60%{ transform: translate(2px, 3px) rotate(.2deg); }
      70%{ transform: translate(-2px, -3px) rotate(-.2deg); }
      80%{ transform: translate(3px, 2px) rotate(.25deg); }
      90%{ transform: translate(-3px, 1px) rotate(-.25deg); }
      100%{ transform: translate(0,0) rotate(0deg); }
    }
    @keyframes demonDrift{
      0%,100%{ filter: saturate(1.2) contrast(1.2) hue-rotate(-10deg); }
      50%{ filter: saturate(1.35) contrast(1.28) hue-rotate(12deg); }
    }

    body.demon.calm .wrap{
      animation:
        demonCalm .22s linear infinite,
        demonDrift 2.8s ease-in-out infinite;
    }
    @keyframes demonCalm{
      0%{ transform: translate(0,0); }
      25%{ transform: translate(1px,-1px); }
      50%{ transform: translate(-1px,1px); }
      75%{ transform: translate(1px,1px); }
      100%{ transform: translate(0,0); }
    }

    body.demon h1, body.demon .quote{
      text-shadow:
        2px 0 rgba(255,90,120,.35),
        -2px 0 rgba(177,108,255,.28);
    }

    /* Demon overlay layer (DEDUPED) */
    .demon-overlay{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index: 99996;
      opacity: 0;
      transition: opacity .22s ease;
      mix-blend-mode: screen;
      background:
        repeating-linear-gradient(0deg,
          rgba(255,90,120,.10) 0px,
          rgba(255,90,120,.10) 1px,
          transparent 1px,
          transparent 6px),
        radial-gradient(900px 520px at 45% 20%, rgba(255,90,120,.18), transparent 60%),
        radial-gradient(780px 460px at 70% 80%, rgba(177,108,255,.14), transparent 62%);
      filter: blur(.2px);
    }
    body.demon .demon-overlay{ opacity: 1; }

    body.demon{ cursor: crosshair; }
    body.demon a, body.demon button{ cursor: not-allowed; }

    .demon-outline{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 99997;
      opacity: 0;
      transform: scale(1.02) translate3d(0,0,0);
      transition: transform .08s ease-out;
      mix-blend-mode: screen;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 700'%3E%3Cg fill='none' stroke='rgba(255,90,120,0.9)' stroke-width='3'%3E%3Cpath d='M220 430 C260 310 330 260 390 245 C430 175 520 150 600 160 C680 150 770 175 810 245 C870 260 940 310 980 430 C920 390 840 395 780 430 C740 520 670 575 600 585 C530 575 460 520 420 430 C360 395 280 390 220 430 Z'/%3E%3Cpath d='M430 270 C405 230 390 200 350 165 C330 145 320 110 345 95 C375 72 410 105 448 155'/%3E%3Cpath d='M770 270 C795 230 810 200 850 165 C870 145 880 110 855 95 C825 72 790 105 752 155'/%3E%3Cpath d='M500 365 C520 340 560 330 600 330 C640 330 680 340 700 365'/%3E%3Cpath d='M520 430 C545 460 570 470 600 470 C630 470 655 460 680 430'/%3E%3C/g%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: center;
      background-size: min(92vw, 980px);
    }

    .demon-outline.flash{ animation: demonOutlineFlash .6s ease-out 1; }
    @keyframes demonOutlineFlash{
      0%   { opacity: 0; transform: scale(1.08); }
      20%  { opacity: .95; transform: scale(1.01); }
      60%  { opacity: .55; transform: scale(1.00); }
      100% { opacity: 0; transform: scale(.99); }
    }

    /* ===== Portal tear ===== */
    .portal-tear{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 99998;
      opacity: 0;
      display:grid;
      place-items:center;
    }
    .portal-tear.show{
      opacity: 1;
      animation: tearFade 0.7s ease-out 1;
    }
    .portal-tear .slash{
      width: min(92vw, 980px);
      height: min(72vh, 520px);
      position: relative;
      transform: rotate(-12deg) scale(.98);
      filter: drop-shadow(0 0 28px rgba(177,108,255,.22)) drop-shadow(0 0 42px rgba(255,90,220,.16));
    }
    .portal-tear .slash::before{
      content:"";
      position:absolute;
      inset: 0;
      background:
        linear-gradient(90deg,
          transparent 0%,
          rgba(255,255,255,.12) 46%,
          rgba(255,255,255,.85) 50%,
          rgba(255,255,255,.12) 54%,
          transparent 100%);
      mask-image: radial-gradient(220px 520px at 50% 50%, rgba(0,0,0,1), transparent 72%);
      opacity: 0;
      animation: tearSlash .55s ease-out 1;
    }
    .portal-tear .slash::after{
      content:"";
      position:absolute;
      inset:-14%;
      background:
        radial-gradient(480px 320px at 50% 45%, rgba(177,108,255,.22), transparent 65%),
        radial-gradient(520px 360px at 50% 55%, rgba(255,90,220,.16), transparent 70%),
        repeating-linear-gradient(0deg,
          rgba(255,255,255,.05) 0px,
          rgba(255,255,255,.05) 1px,
          transparent 1px,
          transparent 6px);
      opacity: 0;
      filter: blur(1px);
      mix-blend-mode: screen;
      animation: tearGlow .7s ease-out 1;
    }
    @keyframes tearSlash{
      0%{ opacity: 0; transform: translateX(-18px) scaleX(.92); }
      20%{ opacity: .95; transform: translateX(0) scaleX(1); }
      100%{ opacity: 0; transform: translateX(12px) scaleX(1.08); }
    }
    @keyframes tearGlow{
      0%{ opacity: 0; transform: scale(.92); }
      30%{ opacity: .95; transform: scale(1); }
      100%{ opacity: 0; transform: scale(1.06); }
    }
    @keyframes tearFade{
      0%{ opacity: 0; }
      20%{ opacity: 1; }
      100%{ opacity: 0; }
    }

    #veilPortal.spawn{
      animation: portalSpawn .55s var(--ease) 1;
      transform-origin: 50% 0%;
    }
    @keyframes portalSpawn{
      0%{ opacity:0; transform: translateY(18px) scale(.985); filter: blur(3px) saturate(1.2); }
      55%{ opacity:1; transform: translateY(-3px) scale(1.01); filter: blur(0px) saturate(1.35); }
      100%{ opacity:1; transform: translateY(0) scale(1); filter: none; }
    }
    @media (prefers-reduced-motion: reduce){
      .portal-tear, #veilPortal.spawn{ animation:none !important; }
    }

    /* ===== NEW: Possession Cursor ===== */
    .rune{
      position:fixed;
      width:18px; height:18px;
      border-radius:999px;
      border:1px solid rgba(177,108,255,.22);
      box-shadow: 0 0 18px rgba(177,108,255,.12);
      pointer-events:none;
      z-index: 99997;
      opacity:0;
      transform: translate(-50%,-50%) scale(.8);
      transition: opacity .25s ease, transform .25s ease;
    }
    .rune.on{
      opacity:.55;
      transform: translate(-50%,-50%) scale(1);
    }

    /* ===== PEAKING EMOTES / GIFS (behind the boxes) ===== */
    .card .head,
    .card .body,
    .identity > *,
    .portrait > *,
    .clip .thumb,
    .clip .body,
    .item > *{
      position: relative;
      z-index: 2;
    }

    .peek{
      position:absolute;
      pointer-events:none;
      user-select:none;
      z-index: 1;
      width: 92px;
      height: auto;
      opacity: .98;
      filter: drop-shadow(0 14px 26px rgba(0,0,0,.45));
      transform: translateZ(0);
    }
    .peek.tr{ top:-18px; right:-18px; }
    .peek.tl{ top:-18px; left:-18px; }
    .peek.br{ bottom:-18px; right:-18px; }
    .peek.bl{ bottom:-18px; left:-18px; }

    .peek.deep.tr{ top:-34px; right:-34px; }
    .peek.deep.tl{ top:-34px; left:-34px; }
    .peek.deep.br{ bottom:-34px; right:-34px; }
    .peek.deep.bl{ bottom:-34px; left:-34px; }

    .peek.sm{ width: 72px; }
    .peek.lg{ width: 120px; }

    @keyframes peekBob{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-6px); }
    }
    .peek.bob{ animation: peekBob 3.6s ease-in-out infinite; }

    @media (max-width: 520px){
      .peek{ width: 70px; }
      .peek.lg{ width: 92px; }
    }
  </style>
</head>

<body>
  <div class="progress" aria-hidden="true"><span id="kvProg"></span></div>
  <a class="skip" href="#main">Skip to content</a>

  <div class="veil-lines"></div>
  <div class="veil-noise"></div>
  <div class="veil-fog" aria-hidden="true"></div>
  <div class="moon-bloom" aria-hidden="true"></div>

  <!-- ‚úÖ MOON -->
  <div class="moon-wrap" id="moonWrap" aria-hidden="true">
    <div class="moon" id="moon"></div>
  </div>

  <canvas id="veilParticles" aria-hidden="true"></canvas>
  <div class="demon-overlay" aria-hidden="true"></div>
  <div class="demon-outline" aria-hidden="true"></div>
  <div class="portal-tear" id="portalTear" aria-hidden="true">
    <div class="slash"></div>
  </div>

  <div class="wrap">
    <header class="topbar" role="banner">
      <a class="brand" href="index.html" aria-label="Kuroveil Home">
        <img src="favicon.png" alt="Kuroveil" />
        <span>Kuroveil</span>
      </a>
      <nav class="navlinks" aria-label="Primary navigation">
        <a href="about.html">About</a>
        <a href="roster.html">Roster</a>
        <a href="apply.html">Apply</a>
        <a href="updates.html">Updates</a>
        <a href="legal.html">Legal</a>
      </nav>
    </header>

    <main id="main">
      <section class="hero" aria-label="Foxy profile hero">
        <div class="hero-inner">
          <div class="identity">
            <!-- Peek sticker inside hero identity -->
            <img class="peek tr bob" src="foxysip.png" alt="" aria-hidden="true">

            <div class="badge-row">
              <span class="badge">Gen 0 ‚Ä¢ Founding Veil</span>

              <span class="badge status offline" id="statusPill" title="Status">
                <span class="dot" aria-hidden="true"></span>
                <span id="statusText">OFFLINE</span>
              </span>

              <span class="badge alt">Active</span>
              <span class="badge">ü¶äüåò</span>
              <button class="btn" id="demonToggle" type="button">üñ§ Demon Takeover</button>
            </div>

            <h1 data-glitch="Foxy">Foxy</h1>
            <p class="titleline">‚ÄúThe Veil‚Äôs Split Soul‚Äù ‚Ä¢ Horror & Chaos</p>
            <p class="hook">
              A wandering kitsune divided by a demon‚Äôs hunger streaming fear until the Veil breaks.
            </p>

            <p class="quote" id="quoteLine">‚ÄúA Kitsune that sometimes makes questionable sounds‚Äù</p>

            <div class="cta" aria-label="Start here actions">
              <a class="btn primary" href="https://www.twitch.tv/sleepingfoxy_" target="_blank" rel="noopener">üé• Watch on Twitch</a>
              <a class="btn" href="#clips">üé¨ See clips</a>
              <a class="btn" href="#lore">üåò Read lore</a>
            </div>

            <div class="id-actions">
              <button class="btn" id="newQuote" type="button" aria-label="Shuffle quote">üé≠ Shuffle quote</button>
              <a class="btn" href="roster.html?tag=horror" aria-label="View roster filtered to Horror">üï∏Ô∏è Horror roster</a>
            </div>
            <div class="toast" id="toast" aria-live="polite"></div>
          </div>

          <div class="side">
            <div class="portrait">
              <img src="foxymoon.png" alt="Foxy portrait" />
              <!-- Peek sticker on portrait -->
              <img class="peek br lg" src="foxyhi.png" alt="" aria-hidden="true">
              <div class="watermark">Member of Kuroveil ‚Ä¢ The Veil is Rising</div>
            </div>

            <div class="socials" aria-label="Social links">
              <a class="sbtn" href="https://www.twitch.tv/sleepingfoxy_" target="_blank" rel="noopener" aria-label="Foxy on Twitch"><span>üé• Twitch</span></a>
              <a class="sbtn" href="https://www.youtube.com/@Sleeping_Foxy" target="_blank" rel="noopener" aria-label="Foxy on YouTube"><span>üì∫ YouTube</span></a>
              <a class="sbtn" href="https://x.com/Sleeping_foxy" target="_blank" rel="noopener" aria-label="Foxy on X"><span>üïØ X</span></a>
            </div>
          </div>
        </div>
      </section>

      <nav class="mininav" aria-label="On-page navigation">
        <a href="#stats" data-spy="stats">Quick Info</a>
        <a href="#live" data-spy="live">Schedule</a>
        <a href="#clips" data-spy="clips">Clips</a>
        <a href="#lore" data-spy="lore">Lore</a>
        <a href="#veilrole" data-spy="veilrole">Role</a>
        <a href="#content" data-spy="content">Content</a>
        <a href="#fan" data-spy="fan">Fan Hub</a>
        <a href="#loadout" data-spy="loadout">Loadout</a>
        <a href="#collab" data-spy="collab">Collabs</a>
        <a href="#brandkit" data-spy="brandkit">Brand Kit</a>
        <a href="#guide" data-spy="guide">Guide</a>
        <a href="#gallery" data-spy="gallery">Gallery</a>
      </nav>

      <section class="grid">
        <article class="card" id="stats">
          <img class="peek tl sm" src="foxyidle.gif" alt="" aria-hidden="true">

          <div class="head">
            <h2>Quick Info</h2>

            <div class="tags" aria-label="Filters">
              <button class="tag" type="button" data-filter="all" aria-pressed="true">All</button>
              <button class="tag" type="button" data-filter="horror">Horror</button>
              <button class="tag" type="button" data-filter="dbd">Dead by Daylight</button>
              <button class="tag" type="button" data-filter="chaotic">Chaotic</button>
              <button class="tag" type="button" data-filter="kitsune">Kitsune</button>
              <button class="tag" type="button" data-filter="demon">Demon</button>
              <span class="tag note">Tip: click tags to filter Content + Gallery</span>
            </div>
          </div>

          <div class="body">
            <div class="stats">
              <div class="stat"><div class="k">Debut</div><div class="v">Feb 22 2026</div></div>
              <div class="stat"><div class="k">Birthday</div><div class="v">Unknown (Veilbound)</div></div>
              <div class="stat"><div class="k">Fan Name</div><div class="v">Veilfoxes</div></div>
              <div class="stat"><div class="k">Hashtags</div><div class="v">#FoxyLive ‚Ä¢ #FoxyFanart</div></div>
              <div class="stat"><div class="k">Stream Vibe</div><div class="v">Chaotic cozy horror</div></div>
              <div class="stat"><div class="k">Timezone</div><div class="v">GMT+1</div></div>
            </div>

            <div style="height:12px"></div>

            <div class="bars">
              <div class="bar">
                <div class="row"><span>Chaos Level</span><strong>70%</strong></div>
                <div class="meter"><div class="fill" style="width:70%"></div></div>
              </div>
              <div class="bar">
                <div class="row"><span>Horror Addiction</span><strong>95%</strong></div>
                <div class="meter"><div class="fill" style="width:95%"></div></div>
              </div>
              <div class="bar">
                <div class="row"><span>Emotional Stability</span><strong>22%</strong></div>
                <div class="meter"><div class="fill" style="width:22%"></div></div>
              </div>
            </div>

            <div style="height:12px"></div>

            <div class="tags">
              <button class="btn small" id="copyLink" type="button">üîó Copy link</button>
              <button class="btn small" id="shareX" type="button">üïØ Share to X</button>
              <a class="btn small" id="backRosterTop" href="roster.html">‚Üê Back</a>
            </div>
          </div>
        </article>

        <article class="card" id="live">
          <img class="peek tr sm bob" src="foxynoted.gif" alt="" aria-hidden="true">

          <div class="head"><h2>Schedule</h2></div>
          <div class="body">
            <div class="list">
              <div class="item">
                <div class="t">
                  <strong>Next stream</strong>
                  <span class="tag" id="nextStreamTag">Wed ‚Ä¢ 20:00 (GMT+1)</span>
                </div>
                <div class="sub" id="nextStreamText">
                  Indie Horror night ‚Äî scream counter + challenge wheel.
                </div>
              </div>

              <div class="item">
                <div class="t">
                  <strong>Typical week</strong>
                  <span class="tag">GMT+1</span>
                </div>
                <div class="sub">
                  Mon: DBD ‚Ä¢ Wed: Indie Horror ‚Ä¢ Fri: Chaos Chatting ‚Ä¢ Sun: Veil collabs
                </div>
              </div>

              <div class="item">
                <div class="t">
                  <strong>When is Foxy live?</strong>
                  <span class="tag">Simple</span>
                </div>
                <div class="sub">
                  For the most accurate status, check Foxy‚Äôs Twitch ‚Äî it updates instantly.
                </div>
              </div>
            </div>
          </div>
        </article>

        <article class="card" id="clips">
          <img class="peek br" src="foxybonk.gif" alt="" aria-hidden="true">

          <div class="head">
            <h2>Clips</h2>
            <div class="tags">
              <a class="btn small" href="https://www.twitch.tv/sleepingfoxy_" target="_blank" rel="noopener">üé• Follow on Twitch</a>
              <a class="btn small" href="#fan">üì© Submit a clip</a>
            </div>
          </div>
          <div class="body">
            <div class="clips">
              <div class="clip" data-tags="horror chaotic">
                <div class="thumb">
                  <div class="play">‚ñ∂ Featured ‚Ä¢ Coming soon</div>
                </div>
                <div class="body">
                  <div class="title">
                    <strong>Best scare of the week</strong>
                    <span class="tag">Horror</span>
                  </div>
                  <p class="desc">This slot will be replaced with the weekly ‚Äútop scream‚Äù clip.</p>
                  <div class="actions">
                    <a class="btn small" href="#fan">üì© How to submit</a>
                    <a class="btn small" href="#content">üï∏Ô∏è Content types</a>
                  </div>
                </div>
              </div>

              <div class="clip" data-tags="dbd chaotic">
                <div class="thumb">
                  <div class="play">‚ñ∂ DBD ‚Ä¢ Coming soon</div>
                </div>
                <div class="body">
                  <div class="title">
                    <strong>DBD chaos moment</strong>
                    <span class="tag">DBD</span>
                  </div>
                  <p class="desc">Perk roulette, demon takeover, and ‚Äúone more match‚Ä¶‚Äù energy.</p>
                  <div class="actions">
                    <a class="btn small" href="https://www.twitch.tv/sleepingfoxy_" target="_blank" rel="noopener">üé• Catch it live</a>
                    <a class="btn small" href="#loadout">üéÆ Loadout</a>
                  </div>
                </div>
              </div>

              <div class="clip" data-tags="chaotic kitsune demon">
                <div class="thumb">
                  <div class="play">‚ñ∂ Lore ‚Ä¢ Coming soon</div>
                </div>
                <div class="body">
                  <div class="title">
                    <strong>Demon vs Kitsune</strong>
                    <span class="tag">Lore</span>
                  </div>
                  <p class="desc">Lore improv and control battles‚Äîthis slot becomes the ‚Äúlore highlight.‚Äù</p>
                  <div class="actions">
                    <a class="btn small" href="#lore">üåò Read lore</a>
                    <button class="btn small" type="button" id="newQuote2">üé≠ Shuffle quote</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <article class="card lore" id="lore">
          <img class="peek tl" src="foxyheadpat.gif" alt="" aria-hidden="true">

          <div class="head">
            <h2>Personal Lore</h2>
            <div class="tabs" aria-label="Lore tabs">
              <button class="tabbtn active" type="button" data-panel="kitsune">ü¶ä Kitsune</button>
              <button class="tabbtn" type="button" data-panel="demon">üñ§ Demon</button>
              <button class="tabbtn" type="button" data-panel="full">üåò Full</button>
            </div>
          </div>
          <div class="body">
            <div class="panel">
              <p style="margin:0;color:rgba(246,241,255,.85);">
                <strong>Lore TL;DR:</strong> A kitsune possessed by a succubus ‚Äî streams become their battleground.
              </p>
            </div>

            <div class="panel" id="panel-kitsune">
              <p>
                From the dark corners of the world, a wandering kitsune crosses the Veil.
                She seeks to protect what little light remains‚Äîquietly, stubbornly.
              </p>
              <p>
                But every step deeper into shadow pulls her closer to the thing inside.
              </p>
            </div>

            <div class="panel hidden" id="panel-demon">
              <p>
                A succubus bound to the kitsune‚Äôs soul‚Äîhungry, clever, and always smiling.
                She feeds on fear, whispers shortcuts, and turns ‚Äúoops‚Äù into ‚Äúagain.‚Äù
              </p>
              <p class="quote">‚ÄúLet me drive. You‚Äôll still be alive‚Ä¶ probably.‚Äù</p>
            </div>

            <div class="panel hidden" id="panel-full">
              <p>
                Once drawn too deep into the shadows, she became bound to a demon‚Äîtwo sides, one body,
                constantly fighting for control.
              </p>
              <p>
                The kitsune seeks separation and mercy. The demon craves chaos and feeds on fear.
                Streams become the battleground‚Äîevery scream is a coin paid to the Veil.
              </p>
              <p style="color:var(--muted); font-size:13px; margin:10px 0 0;">
                Note: This is lore about the creator‚Äôs character, not their personal life. Keep it in-universe.
              </p>
            </div>
          </div>
        </article>

        <article class="card lore" id="veilrole">
          <div class="head"><h2>Role Within The Veil</h2></div>
          <div class="body">
            <p style="margin:0;color:rgba(246,241,255,.86);line-height:1.65;font-size:14px;">
              Foxy embodies the chaotic and horror-driven aspect of the Veil ‚Äî tension, fear, and dark humor.
              Streams explore duality and control battles, shaping the Veil‚Äôs tone.
            </p>
            <div class="tags" style="margin-top:10px">
              <span class="tag">Alignment: Chaos</span>
              <span class="tag">Collab Specialty: Horror Nights</span>
              <span class="tag">Veil Status: Active</span>
            </div>
          </div>
        </article>

        <article class="card" id="content">
          <div class="head"><h2>Content</h2></div>
          <div class="body">
            <div class="tags" style="margin-bottom:10px">
              <span class="tag">Dead by Daylight</span>
              <span class="tag">Indie Horror</span>
              <span class="tag">Chatting</span>
              <span class="tag">Gaming</span>
            </div>

            <div class="list" id="contentList">
              <div class="item" data-tags="horror">
                <div class="t"><strong>Main Streams</strong><span class="tag">Horror</span></div>
                <div class="sub">Indie horror runs ‚Ä¢ challenge modifiers ‚Ä¢ scream counter.</div>
              </div>
              <div class="item" data-tags="dbd chaotic">
                <div class="t"><strong>DBD Sessions</strong><span class="tag">DBD</span></div>
                <div class="sub">Perk roulette ‚Ä¢ community customs ‚Ä¢ ‚Äúdemon takeover‚Äù punishments.</div>
              </div>
              <div class="item" data-tags="chaotic">
                <div class="t"><strong>Chatting</strong><span class="tag">Chaos</span></div>
                <div class="sub">Music commands ‚Ä¢ random talk topics ‚Ä¢ lore teases.</div>
              </div>
              <div class="item" data-tags="kitsune demon">
                <div class="t"><strong>Specials</strong><span class="tag">Lore</span></div>
                <div class="sub">Demon vs kitsune debates ‚Ä¢ ‚Äúcontrol battles‚Äù ‚Ä¢ Veil confessions.</div>
              </div>
            </div>
          </div>
        </article>

        <article class="card" id="fan">
          <img class="peek bl lg" src="foxyheart.png" alt="" aria-hidden="true">

          <div class="head"><h2>Fan Hub</h2></div>
          <div class="body">
            <div class="list">
              <div class="item">
                <div class="t"><strong>Hashtags</strong><span class="tag">Use these</span></div>
                <div class="sub">
                  Live: <strong>#FoxyLive</strong> ‚Ä¢ Fanart: <strong>#FoxyFanart</strong> ‚Ä¢ Clips: <strong>#FoxyClips</strong> ‚Ä¢ Group: <strong>#Kuroveil</strong>
                </div>
              </div>
              <div class="item">
                <div class="t"><strong>Submit a clip</strong><span class="tag">Easy</span></div>
                <div class="sub">
                  Post on X with <strong>#FoxyClips</strong> + tag Foxy. Add <strong>OK TO FEATURE</strong> if you want it shown here.
                  <br><span style="color:var(--muted)">(Optional) Drop the link in your Kuroveil Discord clips channel too.</span>
                </div>
              </div>
              <div class="item">
                <div class="t"><strong>Rules</strong><span class="tag">Keep it safe</span></div>
                <div class="sub">
                  Credit artists ‚Ä¢ no NSFW ‚Ä¢ no doxxing ‚Ä¢ keep it in-universe ‚Ä¢ respect boundaries.
                </div>
              </div>
            </div>
          </div>
        </article>

        <article class="card" id="loadout">
          <img class="peek tr sm" src="foxydum.gif" alt="" aria-hidden="true">

          <div class="head"><h2>Loadout & Favorites</h2></div>
          <div class="body">
            <div class="stats">
              <div class="stat"><div class="k">DBD Role</div><div class="v">Survivor / Chaos</div></div>
              <div class="stat"><div class="k">Horror Taste</div><div class="v">Indie / Paranormal</div></div>
              <div class="stat"><div class="k">Collab Vibe</div><div class="v">Unhinged Fun</div></div>
              <div class="stat"><div class="k">Scare Tolerance</div><div class="v">‚Ä¶depends üíÄ</div></div>
            </div>

            <div style="height:12px"></div>

            <div class="tags" style="margin-top:10px">
              <button class="btn small" id="rollPerks" type="button">üé≤ Roll Perk Roulette</button>
              <span class="tag note" id="perkOut">Roll for pain.</span>
            </div>

            <div style="height:12px"></div>

            <div class="list">
              <div class="item" data-tags="dbd">
                <div class="t"><strong>Favorite DBD stuff</strong><span class="tag">Edit later</span></div>
                <div class="sub">Killers: ?? ‚Ä¢ Survivors: ?? ‚Ä¢ Perks: ?? ‚Ä¢ Map: ??</div>
              </div>
              <div class="item" data-tags="horror">
                <div class="t"><strong>Favorite horror subgenres</strong><span class="tag">Edit later</span></div>
                <div class="sub">Analog ‚Ä¢ Paranormal ‚Ä¢ Psychological ‚Ä¢ ‚ÄúWhatever makes me scream‚Äù</div>
              </div>
            </div>
          </div>
        </article>

        <article class="card" id="collab">
          <img class="peek br sm" src="foxydead.gif" alt="" aria-hidden="true">

          <div class="head"><h2>Collab Hooks</h2></div>
          <div class="body">
            <div class="list">
              <div class="item">
                <div class="t"><strong>Best collab nights</strong><span class="tag">Easy W</span></div>
                <div class="sub">DBD customs ‚Ä¢ 2‚Äì4p indie horror ‚Ä¢ ‚ÄúScream counter‚Äù challenge nights ‚Ä¢ Veil group events.</div>
              </div>
              <div class="item">
                <div class="t"><strong>What Foxy brings</strong><span class="tag">Style</span></div>
                <div class="sub">Chaotic comms ‚Ä¢ dark humor ‚Ä¢ lore improv ‚Ä¢ ‚Äúdemon takeover‚Äù bits that make clips.</div>
              </div>
              <div class="item">
                <div class="t"><strong>Collab boundaries</strong><span class="tag">Professional</span></div>
                <div class="sub">No NSFW ‚Ä¢ no doxxing ‚Ä¢ keep it in-universe ‚Ä¢ respect comfort levels and content ratings.</div>
              </div>
            </div>
          </div>
        </article>

        <article class="card" id="brandkit">
          <img class="peek tl sm" src="foxypeak.gif" alt="" aria-hidden="true">

          <div class="head">
            <h2>Brand Kit</h2>
            <div class="tags">
              <span class="tag">Assets</span>
              <span class="tag">Credit</span>
              <span class="tag">Rules</span>
            </div>
          </div>
          <div class="body">
            <div class="list">
              <div class="item">
                <div class="t"><strong>Creator credit</strong><span class="tag">Use this</span></div>
                <div class="sub">‚ÄúFoxy (Kuroveil)‚Äù + link to Twitch. If fanart: credit the artist and keep watermark.</div>
              </div>
              <div class="item">
                <div class="t"><strong>Allowed edits</strong><span class="tag">Safe</span></div>
                <div class="sub">Clips & memes allowed with credit ‚Ä¢ no NSFW ‚Ä¢ no harassment edits ‚Ä¢ no impersonation.</div>
              </div>
              <div class="item">
                <div class="t"><strong>Asset pack</strong><span class="tag">Add link</span></div>
                <div class="sub">
                  Add your Drive/Dropbox link here:
                  <br><span style="color:var(--muted)">PNGs ‚Ä¢ header ‚Ä¢ icons ‚Ä¢ fanart rules ‚Ä¢ ‚ÄúOK TO FEATURE‚Äù template</span>
                </div>
              </div>
            </div>
          </div>
        </article>

        <article class="card" id="guide">
          <div class="head"><h2>How To Use This Profile</h2></div>
          <div class="body">
            <div class="list">
              <div class="item">
                <div class="t"><strong>Jump around</strong></div>
                <div class="sub">Use the buttons at the top to hop between Lore, Content, and Gallery.</div>
              </div>
              <div class="item">
                <div class="t"><strong>Filter stuff</strong></div>
                <div class="sub">Click the tags in Quick Info to filter content + images.</div>
              </div>
              <div class="item">
                <div class="t"><strong>Open images</strong></div>
                <div class="sub">Click any image to expand it. Press ESC to close.</div>
              </div>
            </div>
          </div>
        </article>

        <article class="card" id="gallery">
          <div class="head"><h2>Gallery</h2></div>
          <div class="body">
            <div class="gallery" id="galleryGrid">
              <div class="gimg" data-tags="horror"><img src="foxy1.png" alt="Gallery 1"></div>
              <div class="gimg" data-tags="dbd chaotic"><img src="foxy2.png" alt="Gallery 2"></div>
              <div class="gimg" data-tags="kitsune"><img src="foxy3.png" alt="Gallery 3"></div>
              <div class="gimg" data-tags="chaotic"><img src="foxyahh.jpg" alt="Gallery 4"></div>
              <div class="gimg" data-tags="demon"><img src="foxyheart.png" alt="Gallery 5"></div>
              <div class="gimg" data-tags="kitsune demon"><img src="foxypng.png" alt="Gallery 6"></div>
            </div>

            <div class="empty" id="emptyMsg">
              Nothing matches that tag yet. Try <strong>All</strong> or a different tag.
            </div>

            <p style="margin:10px 0 0; color:rgba(246,241,255,.7); font-size:12px;">
              Click any image to expand.
            </p>
          </div>
        </article>
      </section>

      <section class="card hidden" id="veilPortal" style="margin-top:14px">
        <div class="head">
          <h2>Veil Portal</h2>
          <div class="tags">
            <span class="tag">SECRET</span>
            <span class="tag">RITUAL</span>
          </div>
        </div>

        <div class="body">
          <div class="list">
            <div class="item">
              <div class="t">
                <strong>Access Granted</strong>
                <span class="tag">üïØ</span>
              </div>
              <div class="sub">
                You pressed the right sequence. The Veil noticed.
                <br><span style="color:var(--muted)">This page will change over time.</span>
              </div>
            </div>

            <div class="item">
              <div class="t">
                <strong>Recruitment Sigil</strong>
                <span class="tag">Apply</span>
              </div>
              <div class="sub">
                <a class="btn primary" href="apply.html">Enter Recruitment</a>
                <a class="btn" href="roster.html">View the Veil</a>
                <button class="btn" id="portalClose" type="button">Seal the portal</button>
              </div>
            </div>

            <div class="item">
              <div class="t">
                <strong>Hidden Lore Fragment</strong>
                <span class="tag">üåò</span>
              </div>
              <div class="sub" id="portalLore">
                ‚ÄúWhen the demon smiles, the Veil gets closer.‚Äù
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="foot">
        <div>¬© <span id="yr"></span> Kuroveil ‚Ä¢ The Veil is Rising</div>
        <div><a id="backRosterFoot" href="roster.html">‚Üê Back to Roster</a></div>
      </div>
    </main>
  </div>

  <div class="floatbar" aria-label="Quick actions">
    <button class="fab" id="fabCopy" type="button" aria-label="Copy profile link"><span>üîó</span><span class="sr">Copy link</span></button>
    <button class="fab" id="fabShare" type="button" aria-label="Share to X"><span>üïØ</span><span class="sr">Share to X</span></button>
    <button class="fab" id="fabTop" type="button" aria-label="Back to top"><span>‚Üë</span><span class="sr">Back to top</span></button>
  </div>

  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div>
      <figure><img id="lightboxImg" alt="Expanded image" /></figure>
      <div class="hint">Click outside the image or press ESC to close.</div>
    </div>
  </div>

  <script>
    // Year
    const yr = document.getElementById("yr");
    if (yr) yr.textContent = new Date().getFullYear();

    // Toast helper (safe)
    const toast = document.getElementById("toast");
    function say(msg, ms=1600){
      if (!toast) return;
      toast.textContent = msg;
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(() => toast.textContent = "", ms);
    }

    /* ===== FIX: Moon parallax drift (mouse move) ===== */
    const reduceMotionMoon = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    const moonWrap = document.getElementById("moonWrap");
    if (!reduceMotionMoon && moonWrap){
      let mx = 0, my = 0;
      let tx = 0, ty = 0;

      window.addEventListener("pointermove", (e) => {
        const px = (e.clientX / window.innerWidth  - 0.5);
        const py = (e.clientY / window.innerHeight - 0.5);
        tx = px * 18;   // strength
        ty = py * 14;
      }, { passive:true });

      function animMoon(){
        mx += (tx - mx) * 0.08;
        my += (ty - my) * 0.08;
        moonWrap.style.setProperty("--mx", mx.toFixed(2) + "px");
        moonWrap.style.setProperty("--my", my.toFixed(2) + "px");
        requestAnimationFrame(animMoon);
      }
      requestAnimationFrame(animMoon);
    }

    /* ===== DEMON TAKEOVER (fixed ordering + safer) ===== */
    const demonBtn = document.getElementById("demonToggle");
    const demonOutline = document.querySelector(".demon-outline");
    let demonTracking = false;

    function demonTakeover(ms=12000){
      if (demonOutline){
        demonOutline.classList.remove("flash");
        void demonOutline.offsetWidth;
        demonOutline.classList.add("flash");
      }

      document.body.classList.remove("calm");
      document.body.classList.add("demon");
      demonTracking = true;

      // ‚úÖ this automatically turns the moon blood-red via CSS (body.demon .moon)
      say("‚Ä¶she‚Äôs driving now.");

      clearTimeout(window.__demonPhase);
      window.__demonPhase = setTimeout(() => {
        document.body.classList.add("calm");
      }, 2000);

      clearTimeout(window.__demonTimer);
      window.__demonTimer = setTimeout(() => {
        document.body.classList.remove("demon","calm");
        demonTracking = false;
        if (demonOutline) demonOutline.style.transform = "scale(1.02)";
        say("You‚Äôre back in control. For now.");
      }, ms);
    }

    window.addEventListener("pointermove", (e) => {
      if (!demonTracking || !demonOutline) return;
      const x = (e.clientX / window.innerWidth  - 0.5) * 20;
      const y = (e.clientY / window.innerHeight - 0.5) * 20;
      demonOutline.style.transform = `scale(1.01) translate3d(${x}px, ${y}px, 0)`;
    }, { passive:true });

    demonBtn?.addEventListener("click", () => demonTakeover(14000));

    setTimeout(() => {
      if (Math.random() < 0.18) demonTakeover(9000);
    }, 25000);

    /* ===== Status pill via ?status=live|scheduled|offline ===== */
    const statusParam = new URLSearchParams(location.search).get("status");
    const STATUS = (statusParam || "offline").toLowerCase();
    const statusPill = document.getElementById("statusPill");
    const statusText = document.getElementById("statusText");

    if (statusPill && statusText){
      statusPill.classList.remove("live","scheduled","offline");
      if (STATUS === "live"){
        statusPill.classList.add("live");
        statusText.textContent = "LIVE";
      } else if (STATUS === "scheduled"){
        statusPill.classList.add("scheduled");
        statusText.textContent = "SCHEDULED";
      } else {
        statusPill.classList.add("offline");
        statusText.textContent = "OFFLINE";
      }
    }

    /* ===== Scroll progress bar ===== */
    const prog = document.getElementById("kvProg");
    function updateProgress(){
      if (!prog) return;
      const doc = document.documentElement;
      const scrollTop = doc.scrollTop || document.body.scrollTop;
      const scrollH = doc.scrollHeight - doc.clientHeight;
      const pct = scrollH > 0 ? (scrollTop / scrollH) * 100 : 0;
      prog.style.width = pct.toFixed(2) + "%";
    }
    window.addEventListener("scroll", updateProgress, { passive: true });
    window.addEventListener("resize", updateProgress, { passive: true });
    updateProgress();

    /* ===== Tag filters (Content + Gallery) + URL ?tag= ===== */
    const filterButtons = Array.from(document.querySelectorAll('button.tag[data-filter]'));
    const contentItems  = Array.from(document.querySelectorAll('#contentList .item'));
    const galleryItems  = Array.from(document.querySelectorAll('#galleryGrid .gimg'));
    const emptyMsg = document.getElementById("emptyMsg");

    function setActiveFilterButton(tag){
      filterButtons.forEach(b => {
        const isActive = b.dataset.filter === tag;
        b.classList.toggle("active", isActive);
        b.setAttribute("aria-pressed", isActive ? "true" : "false");
      });
    }

    function matchesTag(el, tag){
      if (tag === "all") return true;
      const tags = (el.getAttribute("data-tags") || "")
        .toLowerCase()
        .split(/\s+/)
        .filter(Boolean);
      return tags.includes(tag.toLowerCase());
    }

    function applyFilter(tag){
      setActiveFilterButton(tag);

      contentItems.forEach(el => el.classList.toggle("hidden", !matchesTag(el, tag)));
      galleryItems.forEach(el => el.classList.toggle("hidden", !matchesTag(el, tag)));

      const anyVisible = galleryItems.some(el => !el.classList.contains("hidden"));
      if (emptyMsg) emptyMsg.classList.toggle("show", !anyVisible);

      const url = new URL(window.location.href);
      if (tag === "all") url.searchParams.delete("tag");
      else url.searchParams.set("tag", tag);
      window.history.replaceState({}, "", url.toString());

      if (tag !== "all") say(`Filtered to: ${tag.toUpperCase()}`);
    }

    filterButtons.forEach(btn => btn.addEventListener("click", () => applyFilter(btn.dataset.filter)));

    const qsTag = new URLSearchParams(window.location.search).get("tag");
    if (qsTag && filterButtons.some(b => b.dataset.filter === qsTag)) applyFilter(qsTag);
    else applyFilter("all");

    /* ===== Lore tabs ===== */
    const tabBtns = Array.from(document.querySelectorAll(".tabbtn"));
    const panels = {
      kitsune: document.getElementById("panel-kitsune"),
      demon:   document.getElementById("panel-demon"),
      full:    document.getElementById("panel-full"),
    };
    function showPanel(name){
      tabBtns.forEach(b => b.classList.toggle("active", b.dataset.panel === name));
      Object.keys(panels).forEach(k => panels[k]?.classList.toggle("hidden", k !== name));
    }
    tabBtns.forEach(b => b.addEventListener("click", () => showPanel(b.dataset.panel)));

    /* ===== Gallery Lightbox ===== */
    const lb = document.getElementById("lightbox");
    const lbImg = document.getElementById("lightboxImg");

    document.querySelectorAll(".gimg img").forEach(img => {
      img.addEventListener("click", () => {
        if (!lb || !lbImg) return;
        lbImg.src = img.src;
        lb.classList.add("open");
        lb.setAttribute("aria-hidden", "false");
      });
    });

    function closeLB(){
      if (!lb || !lbImg) return;
      lb.classList.remove("open");
      lb.setAttribute("aria-hidden", "true");
      lbImg.src = "";
    }
    lb?.addEventListener("click", (e) => { if (e.target === lb) closeLB(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape") closeLB(); });

    /* ===== Quote shuffle + auto-rotate (safe) ===== */
    const quoteLine = document.getElementById("quoteLine");
    const quotes = [
      "‚ÄúA Kitsune that sometimes makes questionable sounds‚Äù",
      "‚ÄúIf you hear whispering‚Ä¶ no you didn‚Äôt.‚Äù",
      "‚ÄúI‚Äôm fine. The demon is not.‚Äù",
      "‚ÄúOne more match‚Ä¶ one more scream‚Ä¶‚Äù",
      "‚ÄúThe Veil is watching. Probably judging.‚Äù"
    ];
    function shuffleQuote(silent=false){
      if (!quoteLine) return;
      const pick = quotes[Math.floor(Math.random() * quotes.length)];
      quoteLine.textContent = pick;
      if (!silent) say("Quote swapped.");
    }
    document.getElementById("newQuote")?.addEventListener("click", () => shuffleQuote(false));
    document.getElementById("newQuote2")?.addEventListener("click", () => shuffleQuote(false));
    setInterval(() => shuffleQuote(true), 8000);

    /* ===== Copy / Share / Top (safe) ===== */
    async function copyProfileLink(){
      const link = window.location.href;
      try{
        await navigator.clipboard.writeText(link);
        say("Copied link.");
      }catch{
        const t = document.createElement("textarea");
        t.value = link;
        document.body.appendChild(t);
        t.select();
        document.execCommand("copy");
        document.body.removeChild(t);
        say("Copied link.");
      }
    }

    function shareToX(){
      const url = encodeURIComponent(window.location.href);
      const text = encodeURIComponent("Foxy ‚Ä¢ Kuroveil ‚Äî The Veil‚Äôs Split Soul ü¶äüåò");
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, "_blank", "noopener");
    }

    document.getElementById("copyLink")?.addEventListener("click", copyProfileLink);
    document.getElementById("shareX")?.addEventListener("click", shareToX);
    document.getElementById("fabCopy")?.addEventListener("click", copyProfileLink);
    document.getElementById("fabShare")?.addEventListener("click", shareToX);
    document.getElementById("fabTop")?.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: window.matchMedia("(prefers-reduced-motion: reduce)").matches ? "auto" : "smooth" });
    });

    /* ===== Active section highlight (mini-nav) ===== */
    const spyLinks = Array.from(document.querySelectorAll('.mininav a[data-spy]'));
    const sections = spyLinks.map(a => document.getElementById(a.dataset.spy)).filter(Boolean);

    function setActiveSpy(id){
      spyLinks.forEach(a => a.classList.toggle("active", a.dataset.spy === id));
    }

    if (sections.length){
      const spyIO = new IntersectionObserver((entries) => {
        const visible = entries
          .filter(e => e.isIntersecting)
          .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
        if (visible) setActiveSpy(visible.target.id);
      }, {
        root: null,
        threshold: [0.12, 0.18, 0.24, 0.30, 0.36, 0.42, 0.48, 0.54, 0.60],
        rootMargin: "-10% 0px -65% 0px"
      });
      sections.forEach(s => spyIO.observe(s));
      setActiveSpy(sections[0].id);
    }

    /* ===== Back to roster preserves ?tag= ===== */
    function setBackLinks(){
      const tag = new URLSearchParams(window.location.search).get("tag");
      const href = tag ? `roster.html?tag=${encodeURIComponent(tag)}` : "roster.html";
      const a1 = document.getElementById("backRosterTop");
      const a2 = document.getElementById("backRosterFoot");
      if (a1) a1.href = href;
      if (a2) a2.href = href;
    }
    setBackLinks();

    /* ===== Particles ===== */
    (() => {
      const canvas = document.getElementById("veilParticles");
      if (!canvas) return;

      const ctx = canvas.getContext("2d", { alpha: true });
      let W = 0, H = 0, DPR = Math.min(2, window.devicePixelRatio || 1);

      function resize(){
        W = Math.floor(window.innerWidth);
        H = Math.floor(window.innerHeight);
        canvas.width  = Math.floor(W * DPR);
        canvas.height = Math.floor(H * DPR);
        canvas.style.width = W + "px";
        canvas.style.height = H + "px";
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
      }
      window.addEventListener("resize", resize, { passive: true });
      resize();

      const reduce = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const count = reduce ? 35 : Math.min(120, Math.floor((W * H) / 18000));

      const particles = Array.from({ length: count }, () => {
        const r = 0.8 + Math.random() * 2.2;
        return {
          x: Math.random() * W,
          y: Math.random() * H,
          r,
          vx: (-0.18 + Math.random() * 0.36),
          vy: (-0.25 + Math.random() * 0.50),
          a: 0.18 + Math.random() * 0.32
        };
      });

      function step(){
        ctx.clearRect(0, 0, W, H);

        for (let i=0;i<particles.length;i++){
          const p = particles[i];

          p.x += p.vx;
          p.y += p.vy;

          if (p.x < -20) p.x = W + 20;
          if (p.x > W + 20) p.x = -20;
          if (p.y < -20) p.y = H + 20;
          if (p.y > H + 20) p.y = -20;

          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fillStyle = `rgba(255,255,255,${p.a})`;
          ctx.fill();

          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r * 3.2, 0, Math.PI*2);
          ctx.fillStyle = `rgba(177,108,255,${p.a * 0.22})`;
          ctx.fill();
        }

        ctx.lineWidth = 1;
        for (let i=0;i<particles.length;i++){
          const a = particles[i];
          for (let j=i+1;j<i+8 && j<particles.length;j++){
            const b = particles[j];
            const dx = a.x - b.x;
            const dy = a.y - b.y;
            const d2 = dx*dx + dy*dy;
            const max = 140*140;
            if (d2 < max){
              const alpha = (1 - d2/max) * 0.09;
              ctx.strokeStyle = `rgba(255,255,255,${alpha})`;
              ctx.beginPath();
              ctx.moveTo(a.x, a.y);
              ctx.lineTo(b.x, b.y);
              ctx.stroke();
            }
          }
        }

        if (!reduce) requestAnimationFrame(step);
      }

      if (reduce){ step(); }
      else { requestAnimationFrame(step); }
    })();

    /* ===== Easter egg: ritual sequence (FIXED) ===== */
    const ritualSeq = ["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];
    let ritualPos = 0;

    function openVeilPortal(){
      const portal = document.getElementById("veilPortal");
      if (!portal) return;

      const lines = [
        "‚ÄúWhen the demon smiles, the Veil gets closer.‚Äù",
        "‚ÄúYou weren‚Äôt supposed to find this.‚Äù",
        "‚ÄúControl is rented, never owned.‚Äù",
        "‚ÄúEvery scream is a coin paid to the Veil.‚Äù",
        "‚ÄúShe‚Äôs awake now.‚Äù"
      ];
      const lore = document.getElementById("portalLore");
      if (lore) lore.textContent = lines[Math.floor(Math.random() * lines.length)];

      const tear = document.getElementById("portalTear");
      if (tear){
        tear.classList.remove("show");
        void tear.offsetWidth;
        tear.classList.add("show");
      }

      portal.classList.remove("hidden");
      portal.classList.remove("spawn");
      void portal.offsetWidth;
      portal.classList.add("spawn");

      portal.scrollIntoView({
        behavior: window.matchMedia("(prefers-reduced-motion: reduce)").matches ? "auto" : "smooth",
        block: "start"
      });

      say("A door tears open behind the Veil‚Ä¶");
    }

    window.addEventListener("keydown", (e) => {
      const key = (e.key.length === 1) ? e.key.toLowerCase() : e.key;
      const want = ritualSeq[ritualPos];
      if (key === want){
        ritualPos++;
        if (ritualPos >= ritualSeq.length){
          ritualPos = 0;
          openVeilPortal();
        }
        return;
      }
      ritualPos = (key === ritualSeq[0]) ? 1 : 0;
    }, { passive:true });

    document.getElementById("portalClose")?.addEventListener("click", () => {
      document.getElementById("veilPortal")?.classList.add("hidden");
      say("Sealed.");
    });

    window.__openPortalTest = openVeilPortal;

    /* ===== NEW: DBD Perk Roulette ===== */
    const PERKS = [
      "Windows of Opportunity","Lithe","Sprint Burst","Adrenaline","Unbreakable","Decisive Strike",
      "Bond","Kindred","Off the Record","Deliverance","We‚Äôll Make It","Prove Thyself",
      "No Mither (demon pick)","Self-Care (punishment)","Head On","Quick & Quiet"
    ];

    function rollUnique(arr, n){
      const copy = arr.slice();
      const out = [];
      while (out.length < n && copy.length){
        out.push(copy.splice(Math.floor(Math.random()*copy.length),1)[0]);
      }
      return out;
    }

    document.getElementById("rollPerks")?.addEventListener("click", () => {
      const pick = rollUnique(PERKS, 4);
      const out = document.getElementById("perkOut");
      if (out) out.textContent = pick.join(" ‚Ä¢ ");
      say("Demon-approved build rolled.");
    });

    /* ===== NEW: Possession Cursor (runes trail + hover pop) ===== */
    const reduceMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

    if (!reduceMotion){
      const runes = Array.from({length: 10}, () => {
        const d = document.createElement("div");
        d.className = "rune";
        document.body.appendChild(d);
        return d;
      });

      let i = 0;
      window.addEventListener("pointermove", (e) => {
        const r = runes[i++ % runes.length];
        r.style.left = e.clientX + "px";
        r.style.top  = e.clientY + "px";
        r.classList.add("on");
        clearTimeout(r.__t);
        r.__t = setTimeout(() => r.classList.remove("on"), 220);
      }, { passive:true });

      const repelTargets = Array.from(document.querySelectorAll(".card, .item, .clip, .gimg, .sbtn, .stat, .bar"));
      repelTargets.forEach(el => {
        el.addEventListener("pointerenter", () => {
          runes.forEach(r => {
            r.classList.add("on");
            r.style.transform = "translate(-50%,-50%) scale(1.15)";
            clearTimeout(r.__h);
            r.__h = setTimeout(() => { r.style.transform = ""; }, 160);
          });
        });
      });
    }
  </script>
</body>
</html>